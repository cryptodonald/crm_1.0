# Catalogo Prodotti Doctorbed

> **Dispositivo Medico Classe I** — L'unico sistema letto in Europa completamente personalizzabile.
> Ogni materasso è configurato sulle caratteristiche fisiche del cliente.

---

## 1. Struttura Universale — 23cm

Tutti i modelli condividono la stessa architettura a strati e la stessa cover.
Altezza totale: **23cm** per ogni modello.

| Strato | Materiale | Spessore |
|--------|-----------|----------|
| **Cover superiore** | Tessuto tecnico fresco, antiallergico, traspirante | — |
| **Topper (ZeroGravity™)** | Viscoelastico a cella aperta (10× più traspirante del memory tradizionale) | 5cm (ONE) / 8cm (PLUS, PRO) |
| **Base (SmartBase™)** | Poliuretano HR ad alta resilienza | 17cm (ONE) / 14cm (PLUS, PRO) |
| **Cover inferiore** | Tessuto 3D super traspirante + fascia laterale imbottita con maniglie | — |

Cerniera tra topper e base per sfoderamento completo.

---

## 2. I Tre Modelli

### 2.1 Modularbed ONE — 3 Regolazioni

- **Topper**: Fisso 5cm (2,5cm Soft + 2,5cm Hard)
- **Base**: 17cm con scanalature ergonomiche, 3 densità (Soft / Medium / Hard)
- **Cilindri**: Nessuno
- **DualComfort™**: Regolazione indipendente per lato
- **Target**: Coppie con esigenze simili che cercano un sostegno equilibrato

**Combinazioni per lato**: 1 topper × 3 basi = **3**

### 2.2 Modularbed PLUS — 18 Regolazioni

- **Topper**: 8cm configurabile in 6 livelli di rigidità
- **Base**: 14cm con scanalature ergonomiche, 3 densità
- **Cilindri**: Nessuno
- **DualComfort™**: Regolazione indipendente per lato
- **Target**: Coppie con esigenze diverse che vogliono una regolazione precisa

**Combinazioni per lato**: 6 topper × 3 basi = **18**

### 2.3 Modularbed PRO — Regolazioni Illimitate

- **Topper**: 8cm configurabile in 6 livelli di rigidità
- **Base**: 14cm con cavità per cilindri, 3 densità
- **Cilindri**: TubeLayer System™ — 10 cilindri modulari in 3 zone (4 tipi)
- **DualComfort™**: Regolazione indipendente per lato
- **Target**: Esigenze complesse, dolori specifici, massimo controllo

**Combinazioni per lato**: 6 topper × 3 basi × combinazioni cilindri = **illimitate**

### 2.4 Riepilogo Componenti per Modello

| Componente | ONE | PLUS | PRO |
|------------|-----|------|-----|
| Topper | Fisso (5cm) | 6 livelli (8cm) | 6 livelli (8cm) |
| Base | 3 densità (17cm) | 3 densità (14cm) | 3 densità (14cm) |
| Cilindri | — | — | 3 zone × 4 tipi |
| Scanalature ergonomiche | ✓ | ✓ | — |
| DualComfort™ | ✓ | ✓ | ✓ |

---

## 3. Materiali e Specifiche Tecniche

### 3.1 Topper — Materiali (ZeroGravity™)

Il topper è composto da 2 strati di viscoelastico a cella aperta combinati in proporzioni diverse.

| Materiale | Densità | kPa | Funzione |
|-----------|---------|-----|----------|
| **Visco Soft** | 50–60 kg/m³ | 2.5–4 | Comfort, dissipa pressione |
| **Visco Hard** | 60–75 kg/m³ | 5.5–8 | Transizione, sostegno |

Lo strato Soft è sempre sopra (lato corpo).

### 3.2 Topper — 6 Livelli di Rigidità (8cm — PLUS & PRO)

| Livello | Composizione | Range peso indicativo | Sensazione |
|---------|-------------|----------------------|------------|
| **L1** | 8cm Soft | 40–55 kg | Ultra morbido |
| **L2** | 6cm Soft + 2cm Hard | 50–65 kg | Morbido |
| **L3** | 4cm Soft + 4cm Hard | 60–80 kg | Medio |
| **L4** | 2cm Soft + 6cm Hard | 75–90 kg | Sostenuto |
| **L5** | 8cm Hard | 85–110 kg | Rigido |
| **L6** | 4cm Hard + 4cm HR | 105–140+ kg | Ultra rigido (massimo supporto posturale) |

**ONE**: topper fisso 5cm (2,5cm Soft + 2,5cm Hard) — corrisponde concettualmente a L3.

### 3.3 Base — 3 Densità (SmartBase™)

Poliuretano HR (alta resilienza) con scanalature ergonomiche (ONE & PLUS) o cavità per cilindri (PRO).

| Densità | kg/m³ | kPa | Range peso indicativo |
|---------|-------|-----|-----------------------|
| **Soft** | 35–40 | 2.5–3.5 | 45–70 kg |
| **Medium** | 40–50 | 4–5.5 | 65–95 kg |
| **Hard** | 50–60 | 6–8 | 90–130+ kg |

### 3.4 Cilindri TubeLayer System™ (solo PRO)

10 cilindri modulari HR distribuiti in 3 zone, incassati nella parte superiore della base (8cm). Intercambiabili.

**Zone del materasso:**
- **Spalle**: ~55cm, 3 cilindri
- **Lombare/Bacino**: ~70cm, 4 cilindri
- **Gambe**: ~55cm, 3 cilindri (sempre speculari alle spalle)

**4 Tipi di cilindro:**

| Tipo | Diametro | Densità | kPa | Uso tipico |
|------|----------|---------|-----|------------|
| **Super Soft** | 6cm | 25–30 kg/m³ | 1.8–2.5 | Spalle (default) |
| **Soft** | 8cm | 25–30 kg/m³ | 1.8–2.5 | Spalle pesanti |
| **Medium** | 8cm | 40–50 kg/m³ | 4–5.5 | Lombare standard |
| **Firm** | 8cm | 50–60 kg/m³ | 6–8 | Lombare robusti |

**Vincolo zona lombare**: mai Super Soft (minimo Soft 8cm).

### 3.5 Perché Materiali Espansi

Doctorbed utilizza esclusivamente materiali espansi di alta qualità, superiori a:
- **Molle**: micropressioni, usura, rumore, incompatibilità con reti motorizzate
- **Lattice**: pesante, costoso, si sgretola nel tempo

---

## 4. Vincoli di Configurazione (PRO)

### 4.1 Vincoli Base ↔ Cilindri

| Base | Spalle ammessi | Lombare ammessi | Gambe |
|------|---------------|-----------------|-------|
| **Soft** | Super Soft, Soft, Medium | Soft, Medium | = Spalle |
| **Medium** | Super Soft, Soft, Medium, Firm | Soft, Medium, Firm | = Spalle |
| **Hard** | Super Soft, Soft, Medium, Firm | Medium, Firm | = Spalle |

**Regole generali:**
- Lombare: mai Super Soft
- Lombare: sempre ≥ spalle in rigidità
- Spalle: Super Soft sempre ammesso (anche con base Hard)
- Gambe: sempre speculari alle spalle

### 4.2 Regole Cilindri Spalle

| Condizione | Cilindro spalle |
|------------|-----------------|
| <60 kg + side sleeper + spalle strette (A-shape/Normal) | Nessun cilindro (cavità vuota) |
| 60–90 kg (default) | Super Soft 6cm |
| >90 kg | Soft 8cm |

V-shape (spalle larghe) spinge verso opzione più morbida.

---

## 5. Algoritmo di Configurazione

### 5.1 Overview

L'algoritmo analizza i parametri del cliente per generare automaticamente la configurazione ideale per ciascun modello.

**Flow**: `Peso → Punteggio continuo → Modificatori → Guardrail → Arrotondamento → Livello`

Il peso è il parametro primario che fissa il range ammesso. Gli altri parametri regolano la posizione all'interno di quel range. Il guardrail impedisce scostamenti eccessivi.

### 5.2 Parametri dell'Anamnesi (7+3)

**7 parametri principali:**
1. **Sesso** (M/F)
2. **Peso** (30–250 kg)
3. **Altezza** (100–230 cm)
4. **Body shape** — 5 silhouette: V-shape, A-shape, Normal, H-shape, Round
5. **Posizione di sonno** — Lato, Supino, Prono (multi-selezione)
6. **Preferenza rigidità** — Accogliente (soft), Neutro, Sostenuto (firm)
7. **Problematiche** — Lordosi, Cifosi, Dolore lombare, Dolore spalle, Dolore anche, Sciatica, Fibromialgia

**3 parametri accessori:**
- Problemi circolatori (sì/no)
- Russamento/apnee (sì/no)
- Legge/guarda TV a letto (sì/no)

**Dimensioni materasso** (opzionali): larghezza 60–200cm, lunghezza 160–220cm.

### 5.3 Ancore Peso → Punteggio

Il peso viene convertito in un punteggio continuo tramite interpolazione lineare a tratti tra punti di ancoraggio. Sotto il primo e sopra l'ultimo ancoraggio si estrapolano linearmente.

**Topper (scala 1.0–6.0):**

| Peso | Punteggio |
|------|-----------|
| 47 kg | 1.0 |
| 57 kg | 2.0 |
| 70 kg | 3.0 |
| 82 kg | 4.0 |
| 97 kg | 5.0 |
| 122 kg | 6.0 |

**Base (scala 1.0–3.0):**

| Peso | Punteggio |
|------|-----------|
| 45 kg | 1.0 (Soft) |
| 67 kg | 2.0 (Medium) |
| 95 kg | 3.0 (Hard) |

**Cilindri Lombare (scala 1.0–3.0):**

| Peso | Punteggio |
|------|-----------|
| 45 kg | 1.0 |
| 70 kg | 1.5 |
| 82 kg | 2.0 |
| 95 kg | 2.5 |
| 110 kg | 3.0 |

### 5.4 Modificatori

I modificatori aggiustano il punteggio base del peso. Valori negativi → più morbido; positivi → più rigido. Per posizioni multiple di sonno, i modificatori vengono mediati.

#### Modificatori Topper (scala 1.0–6.0)

| Parametro | Valore | Parametro | Valore |
|-----------|--------|-----------|--------|
| Side sleeper | -0.4 | Prono | +0.4 |
| Preferenza morbida | -0.4 | Preferenza rigida | +0.4 |
| Fibromialgia | -0.3 | Dolore lombare | +0.15 |
| Dolore spalle | -0.2 | Lordosi | +0.15 |
| Dolore anche | -0.2 | A-shape | -0.15 |
| Sciatica | -0.2 | V-shape | -0.15 |
| Cifosi | -0.15 | | |

#### Modificatori Base (scala 1.0–3.0)

| Parametro | Valore | Parametro | Valore |
|-----------|--------|-----------|--------|
| Side sleeper | -0.15 | Prono | +0.15 |
| Preferenza morbida | -0.1 | Preferenza rigida | +0.1 |
| Fibromialgia | -0.15 | Dolore lombare | +0.2 |
| | | Lordosi | +0.2 |

#### Modificatori Cilindri Lombare (scala 1.0–3.0)

| Parametro | Valore | Parametro | Valore |
|-----------|--------|-----------|--------|
| Side sleeper | -0.2 | Supino | +0.2 |
| Prono | +0.3 | Preferenza morbida | -0.15 |
| Preferenza rigida | +0.15 | Dolore lombare | +0.3 |
| Lordosi | +0.25 | Sciatica | -0.15 |
| A-shape | +0.1 | | |

### 5.5 Guardrail

I guardrail impediscono scostamenti eccessivi dal punteggio base del peso:

| Componente | Deviazione massima | Scala |
|------------|-------------------|-------|
| Topper | ±1.0 | 1.0–6.0 |
| Base | ±0.5 | 1.0–3.0 |
| Cilindri lombare | ±0.5 | 1.0–3.0 |

Il punteggio finale viene clampato entro `[punteggio_peso - max_deviation, punteggio_peso + max_deviation]` e poi entro i limiti della scala.

### 5.6 Arrotondamento → Livello Discreto

| Componente | Punteggio arrotondato | Risultato |
|------------|----------------------|-----------|
| **Base** | ≤1 → Soft, 2 → Medium, ≥3 → Hard | 3 livelli |
| **Topper** | 1–6 (round) | 6 livelli |
| **Cilindro lombare** | ≤1 → Soft 8cm, 2 → Medium 8cm, ≥3 → Firm 8cm | 3 livelli |

### 5.7 Configurabilità

Tutti i parametri dell'algoritmo (ancore peso, modificatori, guardrail, soglie spalle) sono salvati nella tabella DB `algorithm_settings` e modificabili senza toccare il codice. I valori nel codice servono solo come fallback.

Categorie impostazioni:
- `weight_anchors_topper`, `weight_anchors_base`, `weight_anchors_lumbar`
- `topper_modifiers`, `base_modifiers`, `lumbar_modifiers`
- `guardrails`
- `shoulder_rules`

---

## 6. Accessori

### 6.1 Rete Motorizzata

L'algoritmo consiglia automaticamente la rete motorizzata se il cliente presenta:
- Problemi circolatori
- Dolore lombare
- Russamento, reflusso o apnee notturne
- Abitudine a leggere o guardare TV a letto

### 6.2 Cuscino AirSense

Viscoelastico a cella iperaperta (500× più traspirante del memory tradizionale), lavabile. Dimensioni: 65×40cm.

**Caratteristiche:**
- 4 strati con inserti centrali removibili per regolare l'altezza (0–4 inserti)
- 2 lati cervicali: curva dolce ("gentle") e curva pronunciata ("pronounced")

**Logica algoritmo altezza:**
- Default: 2 inserti
- V-shape (spalle larghe): 3 inserti
- Side sleeper: +1 inserto
- Prone-only: -1 inserto
- Massimo: 4 inserti, Minimo: 0

**Logica algoritmo lato cervicale:**
- Cifosi → curva pronunciata
- Default → curva dolce

---

## 7. DualComfort™

Anche nel letto matrimoniale, i materassi sono sempre singoli accostati. Ogni partner ha la propria analisi e configurazione indipendente. Il CRM supporta coppie con 2 schede di analisi separate per lead.

---

## 8. Dimensioni Disponibili

| Parametro | Range |
|-----------|-------|
| **Larghezza** | 60–200 cm |
| **Lunghezza** | 160–220 cm |

Le dimensioni sono opzionali nell'anamnesi e non influenzano l'algoritmo di configurazione (che lavora solo su parametri fisici del cliente).

---

## 9. Riferimenti Codice

| File | Contenuto |
|------|-----------|
| `src/lib/mattress-configurator.ts` | Algoritmo completo (ancore, modificatori, guardrail, mappatura livelli) |
| `src/types/database.ts` (righe 571–687) | Tipi TypeScript per tutti i componenti |
| `src/types/analysis-form.ts` | Schema Zod per input anamnesi |
| `src/components/leads/analysis/ConfigurationCards.tsx` | UI configurazione con labels italiane |
| `src/components/leads/analysis/MattressCrossSection.tsx` | Visualizzazione SVG sezione trasversale |
| `src/components/pdf/ProductOverviewPdf.tsx` | PDF panoramica prodotto per consulenti |
| DB: `algorithm_settings` | Parametri configurabili runtime |
| DB: `lead_analyses` + `lead_analysis_configs` | Dati anamnesi e configurazioni salvate |
