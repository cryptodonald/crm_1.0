'use client';\n\nimport { signIn, useSession } from 'next-auth/react';\nimport { Button } from '@/components/ui/button';\nimport { Calendar, LogOut } from 'lucide-react';\nimport { useState } from 'react';\n\nexport function GoogleCalendarConnect() {\n  const { data: session, status } = useSession();\n  const [loading, setLoading] = useState(false);\n\n  const handleConnect = async () => {\n    setLoading(true);\n    try {\n      await signIn('google', {\n        redirect: false,\n        callbackUrl: '/settings/calendar',\n      });\n    } catch (error) {\n      console.error('[GoogleCalendar] Sign in error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (status === 'loading') {\n    return <div>Caricamento...</div>;\n  }\n\n  const hasGoogleConnected = session?.googleAccessToken;\n\n  return (\n    <div className=\"space-y-4 rounded-lg border bg-card p-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Google Calendar</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            {hasGoogleConnected \n              ? `Connesso come: ${session?.googleCalendarEmail}`\n              : 'Collega il tuo Google Calendar per sincronizzare le attività'}\n          </p>\n        </div>\n        <Calendar className=\"h-8 w-8 text-muted-foreground\" />\n      </div>\n\n      {!hasGoogleConnected ? (\n        <Button \n          onClick={handleConnect} \n          disabled={loading}\n          className=\"w-full\"\n        >\n          {loading ? 'Connessione...' : 'Connetti Google Calendar'}\n        </Button>\n      ) : (\n        <div className=\"space-y-2\">\n          <p className=\"text-sm text-green-600\">✓ Sincronizzazione attiva</p>\n          <Button \n            variant=\"outline\" \n            className=\"w-full\"\n            disabled\n          >\n            <Calendar className=\"mr-2 h-4 w-4\" />\n            Connesso\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n